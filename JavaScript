var timers = [];
var intervals = [];

// Inicia o cronômetro para uma questão específica
function startClock(questionNumber) {
  if (!timers[questionNumber]) {
    timers[questionNumber] = 0;
  }
  if (!intervals[questionNumber]) {
    intervals[questionNumber] = setInterval(function() {
      timers[questionNumber]++;
      var minutes = Math.floor(timers[questionNumber] / 60);
      var seconds = timers[questionNumber] % 60;
      document.getElementById('clock' + questionNumber).innerText = ('0' + minutes).slice(-2) + ':' + ('0' + seconds).slice(-2);
    }, 1000);
  }
}

// Para o cronômetro da questão
function stopClock(questionNumber) {
  clearInterval(intervals[questionNumber]);
  intervals[questionNumber] = null;
}

// Função para enviar as respostas
function submitAnswers(event) {
  event.preventDefault(); // Evita o envio padrão do formulário

  var nome = document.getElementById('nome').value;
  var serie = document.getElementById('serie').value;
  var data = document.getElementById('data').value;

  if (!nome || !serie || !data) {
    alert("Por favor, preencha todos os campos obrigatórios.");
    return;
  }

  var respostas = {
    nome: nome,
    serie: serie,
    data: data,
    resposta1: document.getElementById('resposta1').value,
    resposta2: document.getElementById('resposta2').value,
    resposta3: document.getElementById('resposta3').value,
    resposta4: document.getElementById('resposta4').value,
    resposta5: document.getElementById('resposta5').value,
    resposta6: document.getElementById('resposta6').value,
    resposta7: document.getElementById('resposta7').value,
    resposta8: document.getElementById('resposta8').value,
    resposta9: document.getElementById('resposta9').value,
    resposta10: document.getElementById('resposta10').value,
    tempos: timers // Envie os tempos de cada questão
  };

  // URL do Google Apps Script que processa as respostas
  var url = 'https://script.google.com/macros/s/AKfycbywhpZJxzktLEpPcHxwXkcssD51qv-QrRPUq4C_IcKN1ZveK9nliMk-jx7cZMGo40E/exec';
  
  fetch(url, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(respostas)
  }).then(function(response) {
    if (!response.ok) {
      throw new Error('Erro ao enviar respostas.');
    }
    return response.json();
  }).then(function(data) {
    var feedback = data.feedback;
    for (var i = 1; i <= feedback.length; i++) {
      var respostaElement = document.getElementById('resposta' + i);
      respostaElement.className = feedback[i - 1]; // Aplicação "correto" ou "incorreto"
    }
    alert('Respostas enviadas com sucesso!');
  }).catch(function(error) {
    console.error('Erro:', error);
  });
}









